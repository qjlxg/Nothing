# Clash Meta (mihomo) é…ç½®æ–‡ä»¶
ipv6: true

mixed-port: 17890
port: 0
socks-port: 0
redir-port: 0
tproxy-port: 0

external-controller: 127.0.0.1:19090 # RESTful API ç›‘å¬åœ°å€
external-controller-cors:
  allow-origins:
    - "https://metacubex.github.io"
    - "https://yacd.metacubex.one"
  allow-private-network: false
secret: "@NuoFang" # å¤–éƒ¨æ§åˆ¶å™¨RESTful APIè®¿é—®å¯†é’¥

allow-lan: false
# bind-address: "*"
# lan-allowed-ips:
#   - 0.0.0.0/0
#   - ::/0
# lan-disallowed-ips:
#   -
# authentication:
#   - "user1:pass1"
#   - "user2:pass2"
# skip-auth-prefixes:
#   - 127.0.0.1/8
#   - ::1/128

disable-keep-alive: true # androidç«¯é»˜è®¤ä¸ºtrue
# keep-alive-idle: 765 # é“¾æ¥é—²ç½®å 765+15*9=15 åˆ†é’Ÿå…³é—­æ— æ•ˆé•¿é“¾æ¥
# keep-alive-interval: 15

clash-for-android:
  append-system-dns: false

global-client-fingerprint: chrome
global-ua: "clash.meta/mihomo"

mode: rule
log-level: warning
find-process-mode: strict

profile:
  store-selected: true
  store-fake-ip: true

unified-delay: true
tcp-concurrent: true
etag-support: true

inbound-tfo: true
inbound-mptcp: true

geodata-mode: false # ä¸å†ä½¿ç”¨ geo è§„åˆ™é›†
geodata-loader: memconservative
geosite-matcher: mph
geo-auto-update: false
geo-update-interval: 48
# geox-url:
#   asn: https://gh.nuofang.nyc.mn/https://github.com/P3TERX/GeoLite.mmdb/raw/download/GeoLite2-ASN.mmdb
#   geosite: https://gh.nuofang.nyc.mn/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
#   geoip: https://gh.nuofang.nyc.mn/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat
#   mmdb: https://gh.nuofang.nyc.mn/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb
# external-doh-server: /dns-query
# external-ui-name: xd #  åˆå¹¶ä¸º external-ui/xdï¼Œéå¿…é¡»ï¼Œæ›´æ–°æ—¶ä¼šæ›´æ–°åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œä¸é…ç½®åˆ™ç›´æ¥æ›´æ–°åˆ° external-ui ç›®å½•
# external-ui-url: "https://gh.nuofang.nyc.mn/https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

tun:
  mtu: 9000 # å…¼å®¹æ€§æœªçŸ¥
  strict-route: true
  stack: system
  auto-route: true
  auto-detect-interface: true
  auto-redirect: true
  endpoint-independent-nat: false
  dns-hijack:
    - any:53
    - "tcp://any:53"

hosts:
  "localhost": "127.0.0.1"
  # bing
  "cn.bing.com": "www.bing.com"
  # cfåŸŸåä¼˜é€‰
  # "+.nuofang.nyc.mn": "cf.090227.xyz"
  # "+.nuofang.us.kg": "cf.090227.xyz"
  "+.yukihasu.top": "cf.090227.xyz"
  "+.czrk168.top": "cf.090227.xyz"
  "+.cloudflare.com": "cf.090227.xyz"
  # "+.pages.dev": "cf.090227.xyz"
  # "+.cloudflareclient.com": "cf.090227.xyz"
  # emby
  "+.123456.al": "cf.090227.xyz"
  "+.nijigem.by": "cf.090227.xyz"
  # # å“”å’”æ¼«ç”»
  # "+.picacomic.com": "cf.090227.xyz" # ä»…åˆ†æµä¸€
  # # nhentaiæ¼«ç”»
  # "+.nhentai.net": "cf.090227.xyz"
  # # pixivé•œåƒæº
  "+.pixiv.re": "cf.090227.xyz"
  # # hanime1.me #hembed.comæ˜¯è§†é¢‘æœåŠ¡å™¨ï¼ŒFastlyæ‰˜ç®¡ï¼Œæ— éœ€ä¼˜é€‰
  # "+.hanime1.me": "cf.090227.xyz"
  # # iwara æ™šé«˜å³°æ•ˆæœä¸ä½³ï¼ŒåœŸè±†è§†é¢‘æœåŠ¡å™¨
  # "+.iwara.tv": "cf.090227.xyz"
  # # netflav.com
  # "+.netflav.com": "cf.090227.xyz"
  # # tsumino.com
  # "+.tsumino.com": "cf.090227.xyz"
  # # ç¾¤å‹
  # "+.beacon-scheduler.sawahara.host": "cf.090227.xyz"
  # "+.latestfile.zip": "cf.090227.xyz"
  # "+.lingcha-kernel.sawahara.host": "cf.090227.xyz"
  # ntpä¼˜åŒ–
  "time.windows.com": "ntp.tencent.com"
  "time.nist.gov": "ntp.tencent.com"
  "pool.ntp.org": "ntp.tencent.com"
  "time.android.com": "ntp.tencent.com"
  # æ— æ³•ä¼˜åŒ–çš„
  # # Eh (e-hentai) è¿æ¥ç›´æ¥è¢«å…³é—­
  # "+.e-hentai.org": "cf.090227.xyz"
  #
  # ä¸æ˜¯cf
  # hitomi doujins

dns:
  enable: true
  ipv6: true
  ipv6-timeout: 80
  use-hosts: true
  use-system-hosts: false
  respect-rules: false
  cache-algorithm: arc
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16

  default-nameserver:
    # - "quic://223.5.5.5#DIRECT"
    - "https://223.5.5.5/dns-query#DIRECT&h3=true"

  proxy-server-nameserver:
    - "https://160195.alidns.com/dns-query#h3=true"
    # - "quic://160195.alidns.com"
    # - "tls://dot-cbe28e9d.dot.pub" # è…¾è®¯

  nameserver:
    - "https://160195.alidns.com/dns-query#DIRECT&h3=true"
    # - "quic://160195.alidns.com#DIRECT"

  direct-nameserver: # ä¸“ç”¨äºdirectå‡ºå£åŸŸåè§£æçš„ DNS æœåŠ¡å™¨ï¼Œéå¿…è¦é…ç½®é¡¹ï¼Œå¦‚æœä¸å¡«åˆ™éµå¾ªnameserver-policyã€nameserverå’Œfallbackçš„é…ç½®
    #! éƒ¨åˆ†åœ°åŒºå…‰çŒ«ä¼šå¼ºåˆ¶å®‰è£…åè¯ˆä¸ŠæŠ¥æ’ä»¶ï¼Œæ­¤æ—¶ä¸åº”ä½¿ç”¨ä»»ä½•æ˜æ–‡dns
    # é€šç”¨ DNS
    - "udp://223.5.5.5#DIRECT"
    - "udp://223.6.6.6#DIRECT"
    # - "https://160195.alidns.com/dns-query#DIRECT&h3=true"

    # æ±Ÿè¥¿ç”µä¿¡ä¸“ç”¨ DNS
    # - "udp://202.101.224.69#DIRECT"
    # - "udp://202.101.226.68#DIRECT"
  direct-nameserver-follow-policy: true # æ˜¯å¦éµå¾ªnameserver-policyï¼Œé»˜è®¤ä¸ºä¸éµå®ˆï¼Œä»…å½“direct-nameserverä¸ä¸ºç©ºæ—¶ç”Ÿæ•ˆ

  nameserver-policy:
    "+.nyc.mn,+.us.kg,+.eu.org,+.cloudns.ch,+.dns-dynamic.net,+.filegear-sg.me,+.speed.xn--1jq721i.cn,+.090227.xyz,+.182682.xyz,+.microsoft-ppe.com,+.onedrive.com,+.live.com,+.microsoft.com,+.microsoft,+.ms,+.office365.com,+.office.net,+.akamaized.net,+.msftauth.net,+.skype.com,+.windows.com,+.msauth.net,+.microsoftpersonalcontent.com,+.msftconnecttest.com,+.msftncsi.com,+.goog,+.xn--ngstr-lra8j.com,+.xn--ngstr-cn-8za9o.com,+.googleapis.cn,+.google.com,+.google.cn,+.githubcopilot.com,+.apple.com,+.nvidia.cn,+.nvidia.com":
      - "https://160195.alidns.com/dns-query#DIRECT&h3=true"
      # - "quic://160195.alidns.com#DIRECT"

    "+.bing.com,+.bingapis.com":
      - "tcp://8.8.8.8#PROXY"
      - "tcp://8.8.4.4#PROXY"
    # "rule-set:Ad": # æ•ˆæœä¸ä½³
    #   - "rcode://success"

  fallback:
    # - "udp://8.8.8.8#PROXY"
    # - "tcp://8.8.8.8#PROXY"
    # - "tls://dns.google#PROXY"
    - "https://dns.google/dns-query#PROXY"
  fallback-filter:
    geoip: false
    # geoip-code: CN
    ipcidr:
      # å›½å†…æ±¡æŸ“åŠåè¯ˆä¸­å¿ƒ
      - 36.135.82.110/32 # ä¸­å›½/å‰æ—/ç§»åŠ¨
      - 39.102.194.95/32 # ä¸­å›½/åŒ—äº¬/é˜¿é‡Œäº‘
      - 61.160.148.90/32 # ä¸­å›½/æ±Ÿè‹/å—äº¬/ç”µä¿¡
      - 101.35.177.86/32 # ä¸­å›½/ä¸Šæµ·/è…¾è®¯äº‘
      - 106.74.25.198/32 # ä¸­å›½/å†…è’™å¤/å‘¼ä¼¦è´å°”/è”é€š
      - 112.15.232.43/32 # ç§»åŠ¨
      - 124.236.16.201/32 # ä¸­å›½/æ²³åŒ—/çŸ³å®¶åº„/ç”µä¿¡
      - 182.43.124.6/32 # ä¸­å›½/è´µå·/è´µé˜³/ç”µä¿¡
      - 211.137.117.149/32 # ä¸­å›½/é™•è¥¿/è¥¿å®‰/ç§»åŠ¨
      - 211.139.145.129/32 # ä¸­å›½/å¹¿ä¸œ/å¹¿å·/ç§»åŠ¨
      - 221.180.160.221/32 # ä¸­å›½/è¾½å®/æ²ˆé˜³/ç§»åŠ¨
      - 221.228.32.13/32 # ä¸­å›½/æ±Ÿè‹/é•‡æ±Ÿ/ç”µä¿¡
      - 223.75.236.241/32 # ä¸­å›½/æ¹–åŒ—/æ­¦æ±‰/ç§»åŠ¨
      #
      - 222.222.222.222/32 # æ±¡æŸ“
      - 69.167.164.199/32 # abc.test.com æ±¡æŸ“
      - 96.110.0.0/16
      - 142.171.98.53/32 # note.sycki.comï¼Œè®¿é—®æ—¶æ±¡æŸ“
      #
      - 0.0.0.0/8
      - 127.0.0.0/8
      - 100.64.0.0/10
      - 240.0.0.0/4 # åŒ…å« 255.255.255.255
      - ::/128
      - ::1/128
      #
      - 10.0.0.0/8
      - 172.16.0.0/12
      - 169.254.0.0/16
      - 192.0.0.0/24
      - 192.0.2.0/24
      - 192.88.99.0/24
      - 192.168.0.0/16
      - 198.18.0.0/15
      - 198.51.100.0/24
      - 203.0.113.0/24
      - 224.0.0.0/4
      # - 100.100.0.0/8 #å…¬å…± IPv4 åœ°å€æ®µï¼Œä¼šå‡ºç°åœ¨å…¬ç½‘
      # - ::/96 #å·²åºŸå¼ƒï¼Œå¯èƒ½ä¼šå‡ºç°åœ¨å…¬ç½‘
      # - ::ffff:0:0/96
      # - 64:ff9b::/96
      # - 100::/64
      # - 2002::/16
      # # - 2001::/32 #å…¨çƒå•æ’­åœ°å€ï¼Œä¼šå‡ºç°åœ¨å…¬ç½‘
      # - 2001:db8::/32
      # - fc00::/7
      # - fec0::/10 #å·²åºŸå¼ƒï¼Œå¯èƒ½ä¼šå‡ºç°åœ¨å…¬ç½‘
      # - ff00::/8
  domain:
    # bingå›½å†…ç‰ˆ
    - "+.cn.bing.com"
    # æ±¡æŸ“
    - "+.js96110.com.cn"
    #
    - "+.test.com"
    - "+.lan"
    - "+.localdomain"
    - "+.example"
    - "+.invalid"
    - "+.localhost"
    - "+.test"
    - "+.local"
    - "+.arpa"
    - "+.home"
    - "+.onion"
    - "+.bit"
    - "+.i2p"
    - "+.gnu"
    - "+.internal"
    - "+.intranet"
    - "+.private"
    - "+.corp"
    - "+.localnet"
    - "+.example.com"
    - "+.example.net"
    - "+.example.org"
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    # - "rule-set:cn" # å…¨éƒ¨å›½å†…åŸŸåä½¿ç”¨çœŸå®IP
    # è…¾è®¯
    - "+.cdn-go.cn"
    # ç½‘æ˜“æ˜“ç›¾å·ç è®¤è¯
    - "+.ye.dun.163yun.com"
    # è¢¤åšç§’éªŒ
    - "+.log-verify.mob.com"
    - "+.cdn-api-verify.mob.com"
    - "+.cache-verify.mob.com"
    # æéªŒ
    - "+.geetest.com"
    # bing
    - "+.bing.com"
    - "+.bingapis.com"
    - "+.189.cn"
    - "+.lan"
    - "+.direct"
    - "+.cable.auth.com"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.network-test.debian.org"
    - "+.detectportal.firefox.com"
    - "+.resolver1.opendns.com"
    - "+.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "+.xbox.*.microsoft.com"
    - "+.xboxlive.com"
    - "+.stun.*"
    - "+.global.turn.twilio.com"
    - "+.global.stun.twilio.com"
    - "+.app.yinxiang.com"
    - "+.injections.adguard.org"
    - "+.local.adguard.org"
    - "+.localhost.*.qq.com"
    - "+.localhost.*.weixin.qq.com"
    - "+.logon.battlenet.com.cn"
    - "+.logon.battle.net"
    - "+.blzstatic.cn"
    - "+.music.163.com"
    - "+.126.net"
    - "+.musicapi.taihe.com"
    - "+.music.taihe.com"
    - "+.songsearch.kugou.com"
    - "+.trackercdn.kugou.com"
    - "+.kuwo.cn"
    - "+.api-jooxtt.sanook.com"
    - "+.joox.com"
    - "+.y.qq.com"
    - "+.music.tc.qq.com"
    - "+.stream.qqmusic.qq.com"
    - "+.aqqmusic.tc.qq.com"
    - "+.xiami.com"
    - "+.music.migu.cn"
    - "+.proxy.golang.org"
    - "+.mcdn.bilivideo.cn"
    - "+.cmpassport.com"
    - "+.id6.me"
    - "+.open.e.189.cn"
    - "+.opencloud.wostore.cn"
    - "+.id.mail.wo.cn"
    - "+.mdn.open.wo.cn"
    - "+.hmrz.wo.cn"
    - "+.nishub1.10010.com"
    - "+.enrichgw.10010.com"
    - "+.wosms.cn"
    - "+.jegotrip.com.cn"
    - "+.icitymobile.mobi"
    - "+.pingan.com.cn"
    - "+.cmbchina.com"
    - "+.10099.com.cn"
    - "+.microdone.cn"
    - "+.pool.ntp.org"
    - "+.ntp.*.com"
    - "+.time.*.com"
    - "+.time.*.gov"
    - "+.time.*.edu.cn"
    - "+.ntp.org.cn"
    - "PDC._msDCS.*.*"
    - "DC._msDCS.*.*"
    - "GC._msDCS.*.*"
    # æŒ‡å‘å†…ç½‘çš„åŸŸå
    - "+.arubanetworks.com"
    - "+.router.asus.com"
    - "+.asusrouter.com"
    - "+.oasisauth.h3c.com"
    - "+.routerlogin.com"
    - "+.tplogin.cn"
    - "+.miwifi.com"
    - "+.test.steampowered.com"
    - "passenger.t3go.cn"
    - "yunbusiness.ccb.com"
    - "wxh.wo.cn"
    - "gate.lagou.com"
    - "www.abchina.com.cn"
    - "+.mobile-bank.psbc.com"

sniffer:
  enable: true
  parse-pure-ip: true
  override-destination: true
  force-dns-mapping: false
  force-domain:
    - +.netflix.com
    - +.nflxvideo.net
    - +.amazonaws.com
    - +.media.dssott.com
    # - "+.v2ex.com"
  skip-dst-address: # è·³è¿‡ç›®æ ‡åœ°å€
    # Telegram çº¯IP
    - 91.105.192.0/23
    - 91.108.4.0/22
    - 91.108.8.0/21
    - 91.108.16.0/21
    - 91.108.56.0/22
    - 95.161.64.0/20
    - 149.154.160.0/20
    - 185.76.151.0/24
    - 2001:67c:4e8::/48
    - 2001:b28:f23c::/47
    - 2001:b28:f23f::/48
    - 2a0a:f280::/32
    - 109.239.140.0/24 # Telegram Messenger LLP
    - 5.28.192.0/18 # IPFFM - Internet Provider Frankfurt GmbH
    # DNS
    - 1.1.1.1/32
    - 1.0.0.1/32
    - 8.8.8.8/32
    - 8.8.4.4/32
  skip-domain:
    - "+.alidns.com"
    # bing
    - "+.bing.com"
    - "+.bingapis.com"
    # windowsè¿æ¥æ£€æµ‹
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    #
    - "+.push.apple.com"
    - "+.io.mi.com"
    # - "+.copilot.microsoft.com"
    # - "+.apple.com"
    # - "www.google.com"
  sniff:
    HTTP:
      ports: [80, 8080]
      override-destination: true
    TLS:
      ports: [443, 8443, 853]
      override-destination: true
    QUIC:
      ports: [443, 8443, 853]
      override-destination: true

proxies: []

# é”šç‚¹
204Set: &204Set
  url: "https://www.youtube.com/generate_204"
  expected-status: 204
  interval: 450
  timeout: 10000
  lazy: true

groupsSet: &groupsSet
  tfo: true
  mptcp: true
  tolerance: 40
  max-failed-times: 2
  <<: *204Set

proxy-groups:
  - name: PROXY
    type: select
    proxies:
      - ğŸš€è‡ªåŠ¨é€‰æ‹©
    include-all-proxies: true
    <<: *groupsSet

  - name: ğŸš€è‡ªåŠ¨é€‰æ‹©
    type: url-test
    include-all-proxies: true
    <<: *groupsSet

rules:
  - MATCH,PROXY
